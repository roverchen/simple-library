<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¹¼å…’åœ’ç°¡æ˜“åœ–æ›¸ç®¡ç†ç³»çµ±</title>
    <style>
        body {
            font-family: "å¾®è»Ÿæ­£é»‘é«”", sans-serif;
            background-color: #f4f7f6;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
        }
        .container {
            background-color: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            width: 600px;
            text-align: center;
        }
        h2 { color: #333; }
        .mode-switch {
            margin-bottom: 20px;
            padding: 10px;
            background-color: #eef;
            border-radius: 8px;
        }
        .input-group {
            margin: 20px 0;
        }
        input[type="text"] {
            padding: 10px;
            font-size: 18px;
            width: 70%;
            border: 2px solid #ddd;
            border-radius: 5px;
        }
        button {
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
        }
        button:hover { background-color: #45a049; }
        .log-area {
            margin-top: 20px;
            text-align: left;
            border-top: 1px solid #eee;
            padding-top: 10px;
        }
        .log-item {
            padding: 8px;
            border-bottom: 1px solid #f0f0f0;
        }
        .status-borrow { color: green; font-weight: bold; }
        .status-return { color: blue; font-weight: bold; }
        .highlight { color: #e91e63; font-weight: bold; }
    </style>
</head>
<body>

<div class="container">
    <h2>ğŸ“š å¹¼å…’åœ’ç¹ªæœ¬å€Ÿé‚„ç³»çµ±</h2>
    
    <!-- è¨­å®šå€Ÿé–±å–®ä½ï¼šå°æ‡‰ä¾†æº -->
    <div class="mode-switch">
        <label>å€Ÿé–±å–®ä½ï¼š</label>
        <select id="borrowerUnit">
            <option value="class">ç­ç´š (Class)</option>
            <option value="family">å®¶åº­ (Family)</option>
        </select>
        <input type="text" id="unitName" placeholder="è¼¸å…¥ç­ç´šåç¨±æˆ–å®¶é•·å§“å" style="width: 200px; font-size: 14px;">
    </div>

    <!-- æ¢ç¢¼æƒæå€ï¼šå°æ‡‰ä¾†æº -->
    <div class="input-group">
        <input type="text" id="barcodeInput" placeholder="è«‹æƒææ›¸ç± Bar code" autofocus>
        <button onclick="handleScan()">ç¢ºèª</button>
    </div>

    <!-- æ“ä½œæ¨¡å¼é¸æ“‡ -->
    <div style="margin-bottom: 15px;">
        <label><input type="radio" name="action" value="borrow" checked> å€Ÿæ›¸</label>
        <label><input type="radio" name="action" value="return"> é‚„æ›¸</label>
    </div>

    <!-- ç³»çµ±è¨˜éŒ„é¡¯ç¤ºå€ -->
    <div class="log-area">
        <h3>æ“ä½œç´€éŒ„</h3>
        <div id="logList"></div>
    </div>
</div>

<script>
    // æ¨¡æ“¬æ›¸ç±è³‡æ–™åº«
    const bookDatabase = {
        "9789861234567": "å¥½é¤“çš„æ¯›æ¯›èŸ²",
        "9789867654321": "çŒœçŒœæˆ‘æœ‰å¤šæ„›ä½ ",
        "123456": "å¹¼å…’åœ’ç¹ªæœ¬ç¯„ä¾‹"
    };

    const barcodeInput = document.getElementById('barcodeInput');
    const logList = document.getElementById('logList');

    // ç›£è½ Enter éµï¼Œæ¨¡æ“¬æ¢ç¢¼æ©Ÿæƒæå¾Œè‡ªå‹•é€å‡º
    barcodeInput.addEventListener('keypress', function (e) {
        if (e.key === 'Enter') {
            handleScan();
        }
    });

    function handleScan() {
        const barcode = barcodeInput.value.trim();
        const unitType = document.getElementById('borrowerUnit').value;
        const unitName = document.getElementById('unitName').value || "æœªå…·å";
        const action = document.querySelector('input[name="action"]:checked').value;
        
        if (!barcode) return;

        // å–å¾—æ›¸åï¼ˆå¦‚æœè³‡æ–™åº«æ²’æœ‰ï¼Œå°±é¡¯ç¤ºæœªçŸ¥æ›¸ç±ï¼‰
        const bookName = bookDatabase[barcode] || `æœªçŸ¥æ›¸ç± (${barcode})`;
        const timestamp = new Date().toLocaleTimeString();

        // å»ºç«‹é¡¯ç¤ºè¨Šæ¯
        const div = document.createElement('div');
        div.className = 'log-item';
        
        let unitDisplay = unitType === 'class' ? `ğŸ« ç­ç´šï¼š${unitName}` : `ğŸ  å®¶åº­ï¼š${unitName}`;
        let actionDisplay = action === 'borrow' 
            ? `<span class="status-borrow">å€Ÿå‡º</span>` 
            : `<span class="status-return">æ­¸é‚„</span>`;

        div.innerHTML = `[${timestamp}] ${actionDisplay} <span class="highlight">${bookName}</span> - ${unitDisplay}`;
        
        // æ’å…¥åˆ°åˆ—è¡¨æœ€ä¸Šæ–¹
        logList.insertBefore(div, logList.firstChild);

        // æ¸…ç©ºè¼¸å…¥æ¡†ä¸¦é‡æ–°èšç„¦ï¼Œæ–¹ä¾¿é€£çºŒæƒæ
        barcodeInput.value = '';
        barcodeInput.focus();
    }
</script>

</body>
</html>
